import{isArray,isObject}from"is-what";var defaultConf={setter:"set",getter:"get",vuexEasyFirestore:!1,ignorePrivateProps:!0,ignoreProps:[],pattern:"standard"};function getKeysFromPath(e){return e?e.match(/\w+/g):[]}function getDeepRef(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=getKeysFromPath(arguments[1]);if(!t.length)return e;for(var r=e;r&&t.length>1;)r=r[t.shift()];var n=t.shift();return r&&r.hasOwnProperty(n)?r[n]:void 0}function getDeepValue(e,t){return getDeepRef(e,t)}function setDeepValue(e,t,r){var n=getKeysFromPath(t),a=n.pop(),o=getDeepRef(e,n.join());return o&&o.hasOwnProperty(a)&&(o[a]=r),e}function popDeepValue(e,t){var r=getDeepRef(e,t);if(isArray(r))return r.pop()}function pushDeepValue(e,t,r){var n=getDeepRef(e,t);if(isArray(n))return n.push(r)}function spliceDeepValue(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments[4],o=getDeepRef(e,t);if(isArray(o))return o.splice(r,n,a)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)};function makeMutationsForAllProps(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=Object.assign({},defaultConf,r),isObject(e)?Object.keys(e).reduce(function(n,a){var o=t?t+"."+a:a,s="simple"===r.pattern?o:"SET_"+o.toUpperCase();if(r.ignorePrivateProps&&"_"===a[0])return n;if(r.ignoreProps.map(function(e){return e.replace(/(.*?)\/([^\/]*?)$/,"$2")}).includes(o))return n;n[s]=function(e,t){return setDeepValue(e,o,t)};var u=e[a];if(isObject(u)){var i=makeMutationsForAllProps(u,o,r);n=_extends({},n,i)}isArray(u)&&(n["simple"===r.pattern?o+".pop":"POP_"+o.toUpperCase()]=function(e){return popDeepValue(e,o)},n["simple"===r.pattern?o+".push":"PUSH_"+o.toUpperCase()]=function(e,t){return pushDeepValue(e,o,t)},n["simple"===r.pattern?o+".splice":"SPLICE_"+o.toUpperCase()]=function(e,t){return spliceDeepValue.apply(void 0,[e,o].concat(toConsumableArray(t)))});return n},{}):{}}function defaultMutations(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return makeMutationsForAllProps(e,null,t=Object.assign({},defaultConf,t))}function defaultGetter(e,t){return t.getters.hasOwnProperty(e)?t.getters[e]:getDeepValue(t.state,e)}function defaultSetter(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=Object.assign({},defaultConf,n);var a=e.split("/"),o=a.pop(),s=a.length?a.join("/")+"/":"",u=s+("simple"===n.pattern?o:"set"+o[0].toUpperCase()+o.substring(1));if(r._actions[u])return r.dispatch(u,t);if(n.vuexEasyFirestore){var i=r._modulesNamespaceMap[e+"/"],p=i?e+"/set":s+"set",c=i?t:{};if(i||(c[o]=t),r._actions[p])return r.dispatch(p,c)}var l="simple"===n.pattern?o:"SET_"+o.toUpperCase(),f=s+l;if(r._mutations[f])return r.commit(f,t);console.error("There is no mutation set for '"+f+"'.\n    Please add a mutation like so in the correct module:\n\n    mutations: {\n      '"+l+"': ({state}, payload) => {\n        state."+o+" = payload\n      }\n    }\n\n    You can also add mutations automatically with vuex-easy-access.\n    See the documentation here:\n      https://github.com/mesqueeb/VuexEasyAccess#2-automatically-generate-mutations-for-each-state-property")}function createSetterModule(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n=Object.assign({},defaultConf,n),{actions:function e(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(a).reduce(function(s,u){var i=o?o+"."+u:u,p=t+i;if(n.ignorePrivateProps&&"_"===u[0])return s;if(n.ignoreProps.includes(p))return s;if(r._modulesNamespaceMap[p+"/"])return s;s[i]=function(e,t){return defaultSetter(p,t,r,n)};var c=a[u];if(isObject(c)&&Object.keys(c).length){var l=e(c,i);Object.assign(s,l)}return s},{})}(e),namespaced:!0}}function generateSetterModules(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e._modulesNamespaceMap;Object.keys(n).forEach(function(a){var o=n[a],s=getKeysFromPath(a+t),u=createSetterModule(o.state,a,e,r);e.registerModule(s,u)}),r=Object.assign({},defaultConf,r);var a=t,o=createSetterModule(e.state,"",e,r);e.registerModule(a,o)}function createEasyAccess(e){var t=Object.assign({},defaultConf,e);return function(e){generateSetterModules(e,t.setter,t),e[t.setter]=function(r,n){return defaultSetter(r,n,e,t)},e[t.getter]=function(t){return defaultGetter(t,e)}}}export default createEasyAccess;export{createEasyAccess,defaultMutations,defaultSetter,defaultGetter,getDeepRef,getKeysFromPath};
//# sourceMappingURL=index.es.min.js.map
